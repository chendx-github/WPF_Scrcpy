<Window x:Class="Wpf_Scrcpy.Views.AdvancedSettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="高级设置" Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">
    <Window.Resources>
        <Style x:Key="GroupStyle" TargetType="GroupBox">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10"/>
        </Style>
        <Style x:Key="LabelStyle" TargetType="Label">
            <Setter Property="Width" Value="120"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        <Style x:Key="ControlStyle" TargetType="Control">
            <Setter Property="Width" Value="200"/>
            <Setter Property="Margin" Value="5,2"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="10">
                
                <!-- 音频设置 -->
                <GroupBox Header="音频设置" Style="{StaticResource GroupStyle}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="音频编码器:" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Style="{StaticResource ControlStyle}" SelectedValue="{Binding AudioCodec}">
                                <ComboBoxItem Content="opus" Tag="opus"/>
                                <ComboBoxItem Content="aac" Tag="aac"/>
                                <ComboBoxItem Content="flac" Tag="flac"/>
                                <ComboBoxItem Content="raw" Tag="raw"/>
                            </ComboBox>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="音频比特率:" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Style="{StaticResource ControlStyle}" Text="{Binding AudioBitRate}">
                                <ComboBoxItem>64K</ComboBoxItem>
                                <ComboBoxItem>128K</ComboBoxItem>
                                <ComboBoxItem>192K</ComboBoxItem>
                                <ComboBoxItem>256K</ComboBoxItem>
                                <ComboBoxItem>320K</ComboBoxItem>
                            </ComboBox>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="音频源:" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Style="{StaticResource ControlStyle}" SelectedValue="{Binding AudioSource}">
                                <ComboBoxItem Content="输出音频" Tag="output"/>
                                <ComboBoxItem Content="播放音频" Tag="playback"/>
                                <ComboBoxItem Content="麦克风" Tag="mic"/>
                                <ComboBoxItem Content="语音通话" Tag="voice-call"/>
                            </ComboBox>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="音频缓冲(ms):" Style="{StaticResource LabelStyle}"/>
                            <TextBox Style="{StaticResource ControlStyle}" Text="{Binding AudioBuffer}"/>
                        </StackPanel>
                        
                        <CheckBox Content="禁用音频" IsChecked="{Binding NoAudio}" Margin="5"/>
                        <CheckBox Content="复制音频" IsChecked="{Binding AudioDup}" Margin="5"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- 相机设置 -->
                <GroupBox Header="相机设置" Style="{StaticResource GroupStyle}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="相机朝向:" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Style="{StaticResource ControlStyle}" SelectedValue="{Binding CameraFacing}">
                                <ComboBoxItem Content="前置" Tag="front"/>
                                <ComboBoxItem Content="后置" Tag="back"/>
                                <ComboBoxItem Content="外置" Tag="external"/>
                            </ComboBox>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="相机尺寸:" Style="{StaticResource LabelStyle}"/>
                            <TextBox Style="{StaticResource ControlStyle}" Text="{Binding CameraSize}" 
                                     ToolTip="格式: 宽x高, 例如: 1920x1080"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="相机帧率:" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Style="{StaticResource ControlStyle}" Text="{Binding CameraFps}">
                                <ComboBoxItem>15</ComboBoxItem>
                                <ComboBoxItem>24</ComboBoxItem>
                                <ComboBoxItem>30</ComboBoxItem>
                                <ComboBoxItem>60</ComboBoxItem>
                            </ComboBox>
                        </StackPanel>
                        
                        <CheckBox Content="高速相机模式" IsChecked="{Binding CameraHighSpeed}" Margin="5"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- 网络设置 -->
                <GroupBox Header="网络设置" Style="{StaticResource GroupStyle}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="TCP/IP地址:" Style="{StaticResource LabelStyle}"/>
                            <TextBox Style="{StaticResource ControlStyle}" Text="{Binding TcpIpAddress}" 
                                     ToolTip="格式: IP:端口, 例如: 192.168.1.100:5555"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="端口范围:" Style="{StaticResource LabelStyle}"/>
                            <TextBox Style="{StaticResource ControlStyle}" Text="{Binding PortRange}" 
                                     ToolTip="默认: 27183:27199"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="隧道主机:" Style="{StaticResource LabelStyle}"/>
                            <TextBox Style="{StaticResource ControlStyle}" Text="{Binding TunnelHost}" 
                                     ToolTip="默认: localhost"/>
                        </StackPanel>
                        
                        <CheckBox Content="强制ADB转发" IsChecked="{Binding ForceAdbForward}" Margin="5"/>
                        <CheckBox Content="关闭时杀死ADB" IsChecked="{Binding KillAdbOnClose}" Margin="5"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- 输入设置 -->
                <GroupBox Header="输入设置" Style="{StaticResource GroupStyle}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="键盘模式:" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Style="{StaticResource ControlStyle}" SelectedValue="{Binding KeyboardMode}">
                                <ComboBoxItem Content="SDK模式" Tag="sdk"/>
                                <ComboBoxItem Content="UHID模式" Tag="uhid"/>
                                <ComboBoxItem Content="AOA模式" Tag="aoa"/>
                                <ComboBoxItem Content="禁用" Tag="disabled"/>
                            </ComboBox>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="鼠标模式:" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Style="{StaticResource ControlStyle}" SelectedValue="{Binding MouseMode}">
                                <ComboBoxItem Content="SDK模式" Tag="sdk"/>
                                <ComboBoxItem Content="UHID模式" Tag="uhid"/>
                                <ComboBoxItem Content="AOA模式" Tag="aoa"/>
                                <ComboBoxItem Content="禁用" Tag="disabled"/>
                            </ComboBox>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="游戏手柄:" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Style="{StaticResource ControlStyle}" SelectedValue="{Binding GamepadMode}">
                                <ComboBoxItem Content="UHID模式" Tag="uhid"/>
                                <ComboBoxItem Content="AOA模式" Tag="aoa"/>
                                <ComboBoxItem Content="禁用" Tag="disabled"/>
                            </ComboBox>
                        </StackPanel>
                        
                        <CheckBox Content="禁用按键重复" IsChecked="{Binding NoKeyRepeat}" Margin="5"/>
                        <CheckBox Content="原始按键事件" IsChecked="{Binding RawKeyEvents}" Margin="5"/>
                        <CheckBox Content="禁用剪贴板同步" IsChecked="{Binding NoClipboardAutosync}" Margin="5"/>
                        <CheckBox Content="传统粘贴模式" IsChecked="{Binding LegacyPaste}" Margin="5"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- 显示设置 -->
                <GroupBox Header="显示设置" Style="{StaticResource GroupStyle}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="显示器ID:" Style="{StaticResource LabelStyle}"/>
                            <TextBox Style="{StaticResource ControlStyle}" Text="{Binding DisplayId}"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="新显示器:" Style="{StaticResource LabelStyle}"/>
                            <TextBox Style="{StaticResource ControlStyle}" Text="{Binding NewDisplay}" 
                                     ToolTip="格式: 宽x高/dpi, 例如: 1920x1080/420"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="渲染驱动:" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Style="{StaticResource ControlStyle}" SelectedValue="{Binding RenderDriver}">
                                <ComboBoxItem Content="自动" Tag=""/>
                                <ComboBoxItem Content="Direct3D" Tag="direct3d"/>
                                <ComboBoxItem Content="OpenGL" Tag="opengl"/>
                                <ComboBoxItem Content="OpenGL ES2" Tag="opengles2"/>
                            </ComboBox>
                        </StackPanel>
                        
                        <CheckBox Content="禁用Mipmaps" IsChecked="{Binding NoMipmaps}" Margin="5"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- 性能设置 -->
                <GroupBox Header="性能设置" Style="{StaticResource GroupStyle}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="视频缓冲(ms):" Style="{StaticResource LabelStyle}"/>
                            <TextBox Style="{StaticResource ControlStyle}" Text="{Binding VideoBuffer}"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal">
                            <Label Content="时间限制(秒):" Style="{StaticResource LabelStyle}"/>
                            <TextBox Style="{StaticResource ControlStyle}" Text="{Binding TimeLimit}"/>
                        </StackPanel>
                        
                        <CheckBox Content="显示FPS计数器" IsChecked="{Binding PrintFps}" Margin="5"/>
                        <CheckBox Content="禁用屏保" IsChecked="{Binding DisableScreensaver}" Margin="5"/>
                        <CheckBox Content="OTG模式" IsChecked="{Binding OtgMode}" Margin="5"/>
                    </StackPanel>
                </GroupBox>
                
            </StackPanel>
        </ScrollViewer>
        
        <!-- 底部按钮 -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
            <Button Content="确定" Width="80" Height="30" Margin="5" 
                    Click="OkButton_Click" IsDefault="True"/>
            <Button Content="取消" Width="80" Height="30" Margin="5" 
                    Click="CancelButton_Click" IsCancel="True"/>
            <Button Content="重置" Width="80" Height="30" Margin="5" 
                    Click="ResetButton_Click"/>
        </StackPanel>
    </Grid>
</Window>
